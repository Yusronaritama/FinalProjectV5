"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2233],{2233:(C,c,i)=>{i.r(c),i.d(c,{WaitingConfirmationPageModule:()=>v});var m=i(2881),u=i(4341),o=i(9420),g=i(9870),n=i(1360),f=i(1553),d=i(9198);const p=[{path:"",component:(()=>{var t;class a{constructor(e,s){this.router=e,this.rentalService=s;const l=this.router.getCurrentNavigation();null!=l&&l.extras.state&&l.extras.state.rental?this.rental=l.extras.state.rental:(console.error("Data rental tidak ditemukan, kembali ke home."),this.router.navigateByUrl("/home",{replaceUrl:!0}))}ngOnInit(){this.rental&&this.rental.id&&(this.pollingInterval=setInterval(()=>{this.checkPaymentStatus()},5e3))}checkPaymentStatus(){console.log(`Mengecek status untuk rental ID: ${this.rental.id}`),this.rentalService.getRentalStatus(this.rental.id).subscribe({next:e=>{"lunas"===e.status_pembayaran||"paid"===e.status_pembayaran?(console.log("Pembayaran terkonfirmasi!"),this.stopPollingAndNavigate()):console.log("Status masih:",e.status_pembayaran)},error:e=>{console.error("Gagal mengecek status:",e)}})}stopPollingAndNavigate(){clearInterval(this.pollingInterval),this.router.navigate(["/transaction-success"],{replaceUrl:!0})}ngOnDestroy(){this.pollingInterval&&clearInterval(this.pollingInterval)}goToHome(){this.pollingInterval&&clearInterval(this.pollingInterval),this.router.navigateByUrl("/home",{replaceUrl:!0})}}return(t=a).\u0275fac=function(e){return new(e||t)(n.rXU(f.Ix),n.rXU(d.K))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-waiting-confirmation"]],standalone:!1,decls:15,vars:1,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back-outline"],[3,"fullscreen"],[1,"container"],["name","bus-outline",1,"main-icon"],["name","crescent","color","primary"]],template:function(e,s){1&e&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),n.bIt("click",function(){return s.goToHome()}),n.nrm(4,"ion-icon",3),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Menunggu Konfirmasi"),n.k0s()()(),n.j41(7,"ion-content",4)(8,"div",5),n.nrm(9,"ion-icon",6)(10,"ion-spinner",7),n.j41(11,"p"),n.EFF(12,"Mohon tunggu sebentar..."),n.k0s(),n.j41(13,"span"),n.EFF(14,"Pembayaran Anda sedang kami proses."),n.k0s()()()),2&e&&(n.R7$(7),n.Y8G("fullscreen",!0))},dependencies:[o.Jm,o.QW,o.W9,o.eU,o.iq,o.w2,o.BC,o.ai],styles:["ion-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;text-align:center;padding:20px}ion-content[_ngcontent-%COMP%]   .main-icon[_ngcontent-%COMP%]{font-size:96px;color:var(--ion-color-medium-shade);margin-bottom:24px}ion-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px;width:40px;height:40px}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;margin:0 0 4px}ion-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium)}"]}),a})()}];let h=(()=>{var t;class a{}return(t=a).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[g.iI.forChild(p),g.iI]}),a})(),v=(()=>{var t;class a{}return(t=a).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[m.MD,u.YN,o.bv,h]}),a})()}}]);