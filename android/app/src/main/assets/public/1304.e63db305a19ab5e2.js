"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1304],{1304:(j,p,l)=>{l.r(p),l.d(p,{PaymentMethodPageModule:()=>R});var d=l(2881),u=l(4341),i=l(9420),g=l(9870),m=l(467),t=l(1360),h=l(1553),_=l(9198);function y(o,s){1&o&&t.nrm(0,"ion-icon",19)}function P(o,s){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"ion-item",23)(2,"ion-label")(3,"p"),t.EFF(4,"PT GoRent Indonesia"),t.k0s(),t.j41(5,"h3",24),t.EFF(6),t.k0s()(),t.j41(7,"ion-button",25),t.bIt("click",function(a){t.eBV(e);const r=t.XpG(2).$implicit,c=t.XpG(2);return t.Njj(c.copyVirtualAccount(a,r.virtualAccount))}),t.EFF(8,"Copy"),t.k0s()()()}if(2&o){const e=t.XpG(2).$implicit;t.R7$(6),t.JRh(e.virtualAccount)}}function f(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",26)(1,"img",27,1),t.bIt("error",function(){t.eBV(e);const a=t.sdS(2);return t.Njj(a.src="assets/icon/placeholder.png")}),t.k0s(),t.j41(3,"p"),t.EFF(4,"Scan QR code ini untuk melakukan pembayaran"),t.k0s()()}if(2&o){const e=t.XpG(2).$implicit;t.R7$(),t.Y8G("src",e.qrCodeImageUrl,t.B4B)}}function v(o,s){if(1&o&&(t.j41(0,"div",20),t.DNE(1,P,9,1,"div",21)(2,f,5,1,"div",22),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.virtualAccount),t.R7$(),t.Y8G("ngIf",e.qrCodeImageUrl)}}function M(o,s){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"ion-item",14),t.bIt("click",function(){const a=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.toggleAccordion(a))}),t.j41(2,"ion-thumbnail",5)(3,"img",15,0),t.bIt("error",function(){t.eBV(e);const a=t.sdS(4);return t.Njj(a.src="assets/icon/placeholder.png")}),t.k0s()(),t.j41(5,"ion-label")(6,"h3"),t.EFF(7),t.DNE(8,y,1,0,"ion-icon",16),t.k0s(),t.j41(9,"p"),t.EFF(10),t.k0s()(),t.nrm(11,"ion-icon",17),t.k0s(),t.DNE(12,v,3,2,"div",18),t.k0s()}if(2&o){const e=s.$implicit,n=t.XpG(2);t.R7$(),t.AVh("item-selected",e===n.selectedMethod),t.R7$(2),t.Y8G("src",e.logo,t.B4B)("alt",e.name),t.R7$(4),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("ngIf",e===n.selectedMethod),t.R7$(2),t.JRh(e.desc),t.R7$(),t.Y8G("name",e.isOpen?"chevron-up-outline":"chevron-down-outline"),t.R7$(),t.Y8G("ngIf",e.isOpen)}}function k(o,s){if(1&o&&(t.j41(0,"div")(1,"p",12),t.EFF(2),t.k0s(),t.j41(3,"ion-list",13),t.DNE(4,M,13,9,"div",9),t.k0s()()),2&o){const e=s.$implicit;t.R7$(2),t.JRh(e.group),t.R7$(2),t.Y8G("ngForOf",e.methods)}}function b(o,s){if(1&o&&(t.j41(0,"ion-row")(1,"ion-col")(2,"ion-text",43),t.EFF(3,"Biaya Antar"),t.k0s()(),t.j41(4,"ion-col",44)(5,"ion-text"),t.EFF(6),t.nI1(7,"currency"),t.k0s()()()),2&o){const e=t.XpG(2);t.R7$(6),t.JRh(t.ii3(7,1,e.rentalData.delivery,"Rp ","symbol","1.0-0"))}}function F(o,s){if(1&o){const e=t.RV6();t.j41(0,"ion-card",28)(1,"ion-item",29)(2,"ion-thumbnail",5)(3,"img",30,2),t.bIt("error",function(){t.eBV(e);const a=t.sdS(4);return t.Njj(a.src="assets/icon/placeholder.png")}),t.k0s()(),t.j41(5,"ion-label")(6,"h2"),t.EFF(7),t.k0s(),t.j41(8,"ion-chip",31)(9,"ion-label"),t.EFF(10),t.k0s()(),t.j41(11,"p",32),t.EFF(12),t.nI1(13,"currency"),t.k0s()()(),t.j41(14,"div",33)(15,"div",34)(16,"div",35)(17,"p"),t.EFF(18,"Pickup"),t.k0s(),t.j41(19,"h3"),t.EFF(20),t.nI1(21,"date"),t.k0s(),t.j41(22,"p"),t.EFF(23),t.nI1(24,"date"),t.k0s()(),t.nrm(25,"ion-icon",36),t.j41(26,"div",35)(27,"p"),t.EFF(28,"Return"),t.k0s(),t.j41(29,"h3"),t.EFF(30),t.nI1(31,"date"),t.k0s(),t.j41(32,"p"),t.EFF(33),t.nI1(34,"date"),t.k0s()()(),t.j41(35,"div",37),t.nrm(36,"ion-icon",38),t.j41(37,"span"),t.EFF(38),t.k0s()(),t.j41(39,"ion-item",39),t.nrm(40,"ion-icon",40),t.j41(41,"ion-label"),t.EFF(42),t.k0s()(),t.j41(43,"div",41)(44,"ion-grid",42)(45,"ion-row")(46,"ion-col")(47,"ion-text",43),t.EFF(48),t.k0s()(),t.j41(49,"ion-col",44)(50,"ion-text"),t.EFF(51),t.nI1(52,"currency"),t.k0s()()(),t.DNE(53,b,8,6,"ion-row",21),t.j41(54,"ion-row")(55,"ion-col")(56,"ion-text",43),t.EFF(57,"Security Deposit (Refundable)"),t.k0s()(),t.j41(58,"ion-col",44)(59,"ion-text"),t.EFF(60),t.nI1(61,"currency"),t.k0s()()()()(),t.nrm(62,"ion-item-divider",45),t.j41(63,"div",46)(64,"ion-grid",42)(65,"ion-row")(66,"ion-col")(67,"strong"),t.EFF(68,"Jumlah Total"),t.k0s()(),t.j41(69,"ion-col",44)(70,"ion-text")(71,"strong"),t.EFF(72),t.nI1(73,"currency"),t.k0s()()()()()(),t.j41(74,"div",47)(75,"h3"),t.EFF(76,"Upload Bukti Pembayaran"),t.k0s(),t.j41(77,"input",48,3),t.bIt("change",function(a){t.eBV(e);const r=t.XpG();return t.Njj(r.onFileSelected(a))}),t.k0s(),t.j41(79,"ion-button",49),t.bIt("click",function(){t.eBV(e);const a=t.sdS(78);return t.Njj(a.click())}),t.EFF(80),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(3),t.Y8G("src","http://127.0.0.1:8000"+(null==e.rentalData.car?null:e.rentalData.car.foto_utama),t.B4B),t.R7$(4),t.JRh(null==e.rentalData.car?null:e.rentalData.car.nama),t.R7$(3),t.SpI("",e.rentalData.duration," Hari"),t.R7$(2),t.SpI("",t.ii3(13,16,null==e.rentalData.car?null:e.rentalData.car.harga_sewa_harian,"Rp ","symbol","1.0-0"),"/hari"),t.R7$(8),t.JRh(t.i5U(21,21,e.rentalData.pickup,"d MMM yy")),t.R7$(3),t.JRh(t.i5U(24,24,e.rentalData.pickup,"HH:mm")),t.R7$(7),t.JRh(t.i5U(31,27,e.rentalData.return,"d MMM yy")),t.R7$(3),t.JRh(t.i5U(34,30,e.rentalData.return,"HH:mm")),t.R7$(5),t.SpI("Total Duration: ",e.rentalData.duration," Days"),t.R7$(4),t.JRh("delivered"===e.rentalData.driverOption?"Diantar ke Lokasi":"Self-Drive (No Driver)"),t.R7$(6),t.SpI("Rental Fee (",e.rentalData.duration," days)"),t.R7$(3),t.JRh(t.ii3(52,33,e.rentalData.cost,"Rp ","symbol","1.0-0")),t.R7$(2),t.Y8G("ngIf",e.rentalData.delivery>0),t.R7$(7),t.JRh(t.ii3(61,38,e.rentalData.car.security_deposit,"Rp ","symbol","1.0-0")),t.R7$(12),t.JRh(t.ii3(73,43,e.rentalData.totalCost,"Rp ","symbol","1.0-0")),t.R7$(8),t.SpI(" ",e.paymentProofFilename," ")}}const O=[{path:"",component:(()=>{var o;class s{constructor(n,a,r){this.router=n,this.toastController=a,this.vehicleService=r,this.paymentGroups=[],this.selectedMethod=null,this.paymentProofFile=null,this.paymentProofFilename="Choose File",this.Number=Number;const c=this.router.getCurrentNavigation();null!=c&&c.extras.state&&(this.rentalData=c.extras.state.data)}ngOnInit(){if(!this.rentalData)return console.error("Data rental tidak ditemukan! Kembali ke halaman utama."),void this.router.navigateByUrl("/home");this.calculateTotalCost(),this.initializePaymentMethods()}calculateTotalCost(){var n;const a=Number(this.rentalData.cost)||0,r=Number(this.rentalData.delivery)||0,c=Number(null===(n=this.rentalData.car)||void 0===n?void 0:n.security_deposit)||0;this.rentalData.totalCost=a+r+c,console.log("Total cost calculated successfully:",this.rentalData.totalCost)}initializePaymentMethods(){this.paymentGroups=[{group:"Bank Transfer",methods:[{name:"Bank Mandiri",desc:"Transfer via ATM, Mobile Banking, Internet Banking",logo:"assets/logopayment/MANDIRI.png",virtualAccount:"2345 678 901",isOpen:!1,dbValue:"transfer"}]},{group:"E-Wallet",methods:[{name:"GoPay",desc:"Pay with your GoPay balance",logo:"assets/logopayment/Gopay.png",virtualAccount:"0812 3456 7890 (a/n GoRent)",isOpen:!1,dbValue:"transfer"},{name:"OVO",desc:"Pay with your OVO balance",logo:"assets/logopayment/OVO.png",virtualAccount:"0812 3456 7891 (a/n GoRent)",isOpen:!1,dbValue:"transfer"},{name:"DANA",desc:"Pay with your DANA balance",logo:"assets/logopayment/DANA.png",virtualAccount:"0812 3456 7892 (a/n GoRent)",isOpen:!1,dbValue:"transfer"},{name:"QRIS",desc:"Pay with any supporting app",logo:"assets/logopayment/QRIS.png",qrCodeImageUrl:"assets/logopayment/BARCODE.png",isOpen:!1,dbValue:"qris"}]}]}toggleAccordion(n){const a=n.isOpen;this.paymentGroups.forEach(r=>{r.methods.forEach(c=>{c.isOpen=!1})}),a?this.selectedMethod=null:(n.isOpen=!0,this.selectedMethod=n)}copyVirtualAccount(n,a){var r=this;return(0,m.A)(function*(){if(n.stopPropagation(),a)try{yield navigator.clipboard.writeText(a),r.presentToast("Nomor pembayaran disalin!","success")}catch(c){console.error("Gagal menyalin:",c)}})()}onFileSelected(n){const a=n.target.files[0];a&&(this.paymentProofFile=a,this.paymentProofFilename=a.name)}confirmPayment(){var n=this;return(0,m.A)(function*(){if(!n.selectedMethod)return void n.presentToast("Silakan pilih metode pembayaran terlebih dahulu.","warning");if(!n.paymentProofFile)return void n.presentToast("Silakan unggah bukti pembayaran.","warning");const a={...n.rentalData,paymentMethod:n.selectedMethod.dbValue,paymentProofFile:n.paymentProofFile,deliveryAddress:n.rentalData.deliveryAddress};console.log("Memulai proses pengiriman data...",a),n.vehicleService.createRental(a).subscribe({next:r=>{console.log("Pesanan berhasil dibuat, data diterima dari server:",r.data),n.presentToast("Pemesanan Anda telah diterima. Mohon tunggu konfirmasi.","success"),n.router.navigate(["/waiting-confirmation"],{replaceUrl:!0,state:{rental:r.data}})},error:r=>{console.error("Gagal mengirim data:",r),n.presentToast("Gagal membuat pesanan. Silakan coba lagi.","danger")}})})()}presentToast(n,a){var r=this;return(0,m.A)(function*(){(yield r.toastController.create({message:n,duration:2500,color:a,position:"top"})).present()})()}}return(o=s).\u0275fac=function(n){return new(n||o)(t.rXU(h.Ix),t.rXU(i.K_),t.rXU(_.K))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-payment-method"]],standalone:!1,decls:15,vars:2,consts:[["img",""],["qrImg",""],["carImg",""],["fileInput",""],["color","primary"],["slot","start"],["defaultHref","/home"],[1,"ion-padding"],[1,"section-title"],[4,"ngFor","ngForOf"],["class","payment-details-card",4,"ngIf"],["expand","block","color","primary",3,"click"],[1,"payment-group-title"],["lines","none",1,"accordion-list"],["button","true","detail","false",3,"click"],[3,"error","src","alt"],["name","checkmark-circle","color","success","class","selected-checkmark",4,"ngIf"],["slot","end","color","medium",3,"name"],["class","expanded-content",4,"ngIf"],["name","checkmark-circle","color","success",1,"selected-checkmark"],[1,"expanded-content"],[4,"ngIf"],["class","qr-code-container",4,"ngIf"],["lines","none",1,"va-item"],[1,"virtual-account-number"],["fill","clear","size","small",1,"copy-button",3,"click"],[1,"qr-code-container"],["alt","QR Code Pembayaran",3,"error","src"],[1,"payment-details-card"],["lines","none",1,"car-info-header"],[3,"error","src"],["color","primary","outline","true"],[1,"price"],[1,"card-content"],[1,"rental-period"],[1,"date-col"],["name","arrow-forward-outline","color","primary"],[1,"total-duration"],["name","time-outline"],["lines","full",1,"driver-option"],["name","person-outline","slot","start"],[1,"cost-breakdown"],[1,"no-padding"],["color","medium"],[1,"ion-text-end"],[1,"divider-line"],[1,"total-row"],[1,"upload-section"],["type","file","hidden","","accept","image/png, image/jpeg, application/pdf",3,"change"],["expand","block","fill","outline",3,"click"]],template:function(n,a){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar",4)(2,"ion-buttons",5),t.nrm(3,"ion-back-button",6),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Payment Method"),t.k0s()()(),t.j41(6,"ion-content")(7,"div",7)(8,"h2",8),t.EFF(9,"Choose Payment Method"),t.k0s(),t.DNE(10,k,5,2,"div",9),t.k0s(),t.DNE(11,F,81,48,"ion-card",10),t.k0s(),t.j41(12,"ion-footer",7)(13,"ion-button",11),t.bIt("click",function(){return a.confirmPayment()}),t.EFF(14,"KONFIRMASI"),t.k0s()()),2&n&&(t.R7$(10),t.Y8G("ngForOf",a.paymentGroups),t.R7$(),t.Y8G("ngIf",a.rentalData))},dependencies:[d.Sq,d.bT,i.Jm,i.QW,i.b_,i.ZB,i.hU,i.W9,i.M0,i.lO,i.eU,i.iq,i.uz,i.Dg,i.he,i.nf,i.ln,i.IO,i.Zx,i.BC,i.ai,i.el,d.oe,d.vh],styles:["[_nghost-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast)}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color)}[_nghost-%COMP%]   .ion-padding[_ngcontent-%COMP%]{padding:16px}[_nghost-%COMP%]   ion-content.ion-padding[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-text-color);margin-bottom:1rem}[_nghost-%COMP%]   .payment-group-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--ion-color-medium-shade);margin-top:1.5rem;margin-bottom:.5rem}[_nghost-%COMP%]   .accordion-list[_ngcontent-%COMP%]{background:transparent;padding:0}[_nghost-%COMP%]   ion-item.item-selected[_ngcontent-%COMP%]{border-color:var(--ion-color-success);box-shadow:0 0 0 2px var(--ion-color-success)}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]{margin:2rem 0 0;border-radius:0;box-shadow:none;background:var(--ion-item-background)}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:16px}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .rental-period[_ngcontent-%COMP%], [_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .driver-option[_ngcontent-%COMP%]{margin-bottom:16px}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .cost-breakdown[_ngcontent-%COMP%]{font-size:.9rem}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .divider-line[_ngcontent-%COMP%]{margin:12px 0;min-height:1px;--background: var(--ion-border-color)}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{font-size:1.1rem}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .no-padding[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]{margin-top:24px}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin-top:0;margin-bottom:12px;color:var(--ion-text-color)}[_nghost-%COMP%]   .payment-details-card[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-color: var(--ion-color-medium);--color: var(--ion-color-medium);text-transform:none}"]}),s})()}];let C=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[g.iI.forChild(O),g.iI]}),s})(),R=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[d.MD,u.YN,i.bv,C]}),s})()}}]);