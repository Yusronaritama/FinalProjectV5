<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Payment Instruction</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div *ngIf="finalData">
    <h2 class="section-title">Booking Summary</h2>
    <ion-card class="info-card">
      <ion-card-content>
        <p><strong>Car:</strong> {{ finalData.car.name }}</p>
        <p><strong>Duration:</strong> {{ finalData.duration }} Day(s)</p>
        <p><strong>Service:</strong> {{ finalData.driverOption === 'delivered' ? 'Diantar' : 'Pickup' }}</p>
        <ion-item-divider></ion-item-divider>
        <p class="total"><strong>Total Payment:</strong> <strong>{{ finalData.total | currency:'Rp ':'symbol':'1.0-0' }}</strong></p>
      </ion-card-content>
    </ion-card>

    <h2 class="section-title">Payment Instructions</h2>
    <ion-card class="info-card">
      <ion-card-content>
        <div *ngIf="finalData.paymentMethod === 'bca' || finalData.paymentMethod === 'mandiri'">
          <p>Please transfer to the following Virtual Account:</p>
          <div class="va-container">
            <h3>8808 1234 5678 9012</h3>
            <ion-button fill="clear" size="small">
              <ion-icon name="copy-outline" slot="start"></ion-icon>
              Copy
            </ion-button>
          </div>
          <p class="payment-note">Payment will be verified automatically within 10 minutes.</p>
        </div>

        <div *ngIf="finalData.paymentMethod === 'gopay' && user">
           <p>Please complete the payment using GoPay to the following number:</p>
          <div class="va-container">
            <h3>{{ user.phoneNumber }}</h3>
          </div>
           <p class="payment-note">We will send a payment request to your GoPay app.</p>
        </div>

      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

<ion-footer class="ion-padding">
  <ion-button expand="block" color="primary" routerLink="/home" routerDirection="root">SELESAI</ion-button>
</ion-footer>